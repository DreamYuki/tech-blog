# 智能音频播放器使用说明

## 功能特点

✅ **自动扫描音频文件** - 自动读取 `public/audio/` 目录下的所有音频文件
✅ **支持多种格式** - 支持 MP3、WAV、OGG、M4A、AAC 格式
✅ **智能文件名处理** - 自动将文件名中的横线和下划线转换为空格作为歌曲标题
✅ **实时刷新** - 点击刷新按钮即可重新扫描音频文件
✅ **播放列表管理** - 自动按修改时间排序，最新文件在前
✅ **完整播放控制** - 播放/暂停、上一首/下一首、音量控制、进度条
✅ **响应式设计** - 支持展开/收起模式，适配不同屏幕尺寸

## 使用方法

### 1. 添加音频文件
只需将你的音频文件放入 `public/audio/` 目录：

```
tech-blog/
├── public/
│   ├── audio/
│   │   ├── 专注学习音乐.mp3
│   │   ├── 轻松编程背景音.mp3
│   │   ├── 深度思考音乐.wav
│   │   └── 游戏科学《黑神话：悟空》主题音乐.mp3
│   └── ...
```

### 2. 自动识别
- 播放器会自动扫描 `public/audio/` 目录
- 支持的格式：`.mp3`, `.wav`, `.ogg`, `.m4a`, `.aac`
- 文件名会自动处理为歌曲标题（如：`focus-music.mp3` → `focus music`）

### 3. 播放控制
- **收起模式**：显示播放/暂停按钮和展开按钮
- **展开模式**：显示完整播放器界面
  - 歌曲信息和进度
  - 播放控制（上一首/播放/下一首）
  - 音量控制和静音
  - 刷新按钮重新扫描文件

### 4. 智能特性
- **加载状态**：显示加载动画和状态提示
- **空状态处理**：未找到音频文件时显示提示信息
- **错误处理**：API 失败时使用默认音乐列表
- **自动播放下一首**：当前歌曲结束后自动播放下一首

## API 接口

播放器通过 `/api/audio` 接口获取音频文件列表：

```typescript
// GET /api/audio
{
  "tracks": [
    {
      "id": "focus-music.mp3",
      "title": "focus music",
      "url": "/audio/focus-music.mp3",
      "size": 1024000,
      "modified": "2024-01-01T12:00:00.000Z"
    }
  ]
}
```

## 文件命名建议

为了获得更好的显示效果，建议使用以下命名规范：

- ✅ `专注学习音乐.mp3` → `专注学习音乐`
- ✅ `focus-music.mp3` → `focus music`
- ✅ `coding_background.mp3` → `coding background`
- ❌ `music123.mp3` → `music123`（不够描述性）

## 故障排除

1. **播放器显示"未找到音频文件"**
   - 检查 `public/audio/` 目录是否存在
   - 确认音频文件格式是否支持
   - 点击刷新按钮重新扫描

2. **音频无法播放**
   - 检查文件是否损坏
   - 确认浏览器支持该音频格式
   - 检查文件路径是否正确

3. **新添加的文件不显示**
   - 点击刷新按钮重新扫描
   - 重启开发服务器
   - 检查文件权限

## 技术实现

- **前端**：React + TypeScript + Tailwind CSS
- **后端**：Next.js API Routes + Node.js fs 模块
- **音频处理**：HTML5 Audio API
- **状态管理**：React Hooks (useState, useEffect, useRef)
